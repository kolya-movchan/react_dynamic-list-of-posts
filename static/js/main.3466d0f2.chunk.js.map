{"version":3,"sources":["types/enums/Errors.tsx","components/Loader/Loader.tsx","components/PostDetails.tsx","components/UserSelector.tsx","components/PostList.tsx","utils/fetchClient.ts","api/comment.tsx","api/post.tsx","components/NewCommentForm.tsx","App.tsx","api/user.tsx","index.tsx"],"names":["ServerErrors","FormErrors","Loader","className","PostDetails","activePost","comments","areCommentsLoading","error","isFormRequested","isRetryLoading","onFormRequest","onDelete","onRetry","setError","id","title","body","successfulLoad","Comments","type","onClick","length","map","commentator","CommentatorId","CommentatorEmail","email","CommentatorName","name","CommentatorBody","href","UserSelector","users","activeUser","onOpeningPosts","useState","isActive","setIsActive","classNames","onBlur","event","parentContainer","currentTarget","parentElement","requestAnimationFrame","contains","document","activeElement","role","user","PostList","posts","onOpeningPostDetails","post","isPostActive","BASE_URL","wait","delay","Promise","resolve","setTimeout","request","url","method","data","options","JSON","stringify","headers","then","fetch","response","ok","Error","json","client","getComments","removeComment","getPosts","NewCommentForm","isFormLoading","postComment","initialFormField","content","errorFormField","setName","setEmail","setBody","handleInputContacts","inputName","target","updatedData","value","validateError","errorTriangle","errorMessage","message","htmlFor","placeholder","onChange","Name","Email","TextArea","preventDefault","newComment","postId","App","setActiveUser","setActivePost","setUsers","setPosts","setComments","isPostLoading","setIsPostLoading","setIsFormRequested","setAreCommentsLoading","setIsFormLoading","setIsRetryLoading","commentToAdd","setCommentToAdd","commentIdOnDelete","setCommentIdOnDelete","userOrPostError","Users","Posts","fetchUsers","a","usersFromServer","fetchPosts","postsFromServer","fetchCommentsByPostId","commentsFromServer","comment","NewComment","deleteComment","filter","CommentDeletion","useEffect","commentID","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.3466d0f2.chunk.js","sourcesContent":["export enum ServerErrors {\n  Users = 'Unable to load users from the Server',\n  Posts = 'Ooops, Unable to load posts from the Server',\n  Comments = 'Ooops, Unable to load comments from the Server',\n  // eslint-disable-next-line max-len\n  NewComment = 'Ooops, your comment has just failed to be published. Please, try again',\n  // eslint-disable-next-line max-len\n  CommentDeletion = 'Failed to delete the comment, please retry in a few seconds',\n}\n\nexport enum FormErrors {\n  Name = 'Name is required',\n  Email = 'Email is required',\n  TextArea = 'Enter some text',\n}\n","import './Loader.scss';\n\nexport const Loader = () => (\n  <div className=\"Loader\" data-cy=\"Loader\">\n    <div className=\"Loader__content\" />\n  </div>\n);\n","import React, { Dispatch, SetStateAction } from 'react';\nimport '../stylesExtra/extra.scss';\n\nimport { Loader } from './Loader';\n\nimport { ServerErrors } from '../types/enums/Errors';\nimport { Comment } from '../types/Comment';\nimport { Post } from '../types/Post';\n\ntype Props = {\n  activePost: Post | null,\n  comments: Comment[],\n  error: ServerErrors | null,\n  areCommentsLoading: boolean,\n  isFormRequested: boolean\n  isRetryLoading: boolean,\n  onFormRequest: Dispatch<SetStateAction<boolean>>,\n  onDelete: (id: number) => void,\n  onRetry: () => void,\n  setError: Dispatch<SetStateAction<ServerErrors | null>>,\n};\n\nexport const PostDetails: React.FC<Props> = ({\n  activePost,\n  comments,\n  areCommentsLoading,\n  error,\n  isFormRequested,\n  isRetryLoading,\n  onFormRequest,\n  onDelete,\n  onRetry,\n  setError,\n}) => {\n  const { id, title, body } = activePost as Post;\n  const successfulLoad = !areCommentsLoading && !error;\n\n  return (\n    <>\n      <div className=\"block\">\n        <h2 data-cy=\"PostTitle\">\n          {`#${id}: ${title}`}\n        </h2>\n\n        <p data-cy=\"PostBody\">{body}</p>\n      </div>\n\n      <div className=\"block\">\n        {areCommentsLoading && <Loader /> }\n\n        {error && (\n          <div\n            className=\"notification is-danger\"\n            data-cy=\"CommentsError\"\n          >\n            {error}\n\n            {error !== ServerErrors.Comments && (\n              <button\n                type=\"button\"\n                className=\"button button-retry\"\n                onClick={onRetry}\n              >\n                Try again\n              </button>\n            )}\n\n            <button\n              type=\"button\"\n              className=\"delete is-small\"\n              aria-label=\"delete\"\n              onClick={() => setError(null)}\n            >\n              delete button\n            </button>\n          </div>\n        )}\n\n        {isRetryLoading && <Loader />}\n\n        {successfulLoad && (\n          !comments.length ? (\n            <p className=\"title is-4\" data-cy=\"NoCommentsMessage\">\n              No comments yet\n            </p>\n          ) : (\n            <>\n              <p className=\"title is-4\">Comments:</p>\n\n              <ul id=\"comment-list\">\n                {comments.map(commentator => {\n                  const {\n                    id: CommentatorId,\n                    email: CommentatorEmail,\n                    name: CommentatorName,\n                    body: CommentatorBody,\n                  } = commentator;\n\n                  return (\n                    <li\n                      key={CommentatorId}\n                      className=\"message is-small\"\n                      data-cy=\"Comment\"\n                    >\n                      <div className=\"message-header\">\n                        <a\n                          href={`mailto:${CommentatorEmail}`}\n                          data-cy=\"CommentAuthor\"\n                        >\n                          {CommentatorName}\n                        </a>\n                        <button\n                          data-cy=\"CommentDelete\"\n                          type=\"button\"\n                          className=\"delete is-small\"\n                          aria-label=\"delete\"\n                          onClick={() => onDelete(CommentatorId)}\n                        >\n                          delete button\n                        </button>\n                      </div>\n                      <div className=\"message-body\" data-cy=\"CommentBody\">\n                        {CommentatorBody}\n                      </div>\n                    </li>\n                  );\n                })}\n              </ul>\n            </>\n          )\n        )}\n\n        {(successfulLoad && !isFormRequested) && (\n          <button\n            data-cy=\"WriteCommentButton\"\n            type=\"button\"\n            className=\"button is-link\"\n            onClick={() => onFormRequest(true)}\n          >\n            Write a comment\n          </button>\n        )}\n      </div>\n    </>\n  );\n};\n","import React, { useState } from 'react';\nimport classNames from 'classnames';\n\nimport { User } from '../types/User';\n\ntype Props = {\n  users: User[],\n  activeUser: User | null,\n  onOpeningPosts: (user: User) => void,\n};\n\nexport const UserSelector: React.FC<Props> = ({\n  users,\n  activeUser,\n  onOpeningPosts,\n}) => {\n  const [isActive, setIsActive] = useState(false);\n\n  const handleDropDownBlur = (event: React.FocusEvent<HTMLButtonElement>) => {\n    const parentContainer = event.currentTarget.parentElement?.parentElement;\n\n    requestAnimationFrame(() => {\n      if (!parentContainer?.contains(document.activeElement)) {\n        setIsActive(false);\n      }\n    });\n  };\n\n  return (\n    <div\n      data-cy=\"UserSelector\"\n      className={classNames(\n        'dropdown',\n        {\n          'is-active': isActive,\n        },\n      )}\n    >\n      <div className=\"dropdown-trigger\">\n        <button\n          type=\"button\"\n          className=\"button\"\n          aria-haspopup=\"true\"\n          aria-controls=\"dropdown-menu\"\n          onClick={() => setIsActive(!isActive)}\n          onBlur={handleDropDownBlur}\n        >\n          <span>{activeUser ? activeUser.name : 'Choose a user'}</span>\n\n          <span className=\"icon is-small\">\n            <i className=\"fas fa-angle-down\" aria-hidden=\"true\" />\n          </span>\n        </button>\n      </div>\n\n      {users.length > 0 && (\n        <div className=\"dropdown-menu\" id=\"dropdown-menu\" role=\"menu\">\n          <div className=\"dropdown-content\">\n            {users.map(user => {\n              return (\n                <a\n                  key={user.id}\n                  href={`#user-${user.id}`}\n                  className={classNames(\n                    'dropdown-item',\n                    {\n                      'is-active': activeUser && (activeUser.id === user.id),\n                    },\n                  )}\n                  onClick={() => {\n                    onOpeningPosts(user);\n                    setIsActive(false);\n                  }}\n                >\n                  {user.name}\n                </a>\n              );\n            })}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n","/* eslint-disable no-console */\nimport React from 'react';\nimport classNames from 'classnames';\n\nimport { Post } from '../types/Post';\n\ntype Props = {\n  posts: Post[],\n  activePost: Post | null,\n  onOpeningPostDetails: (post: Post) => void,\n};\n\nexport const PostList: React.FC<Props> = ({\n  posts,\n  activePost,\n  onOpeningPostDetails,\n}) => {\n  return (\n    <div data-cy=\"PostsList\">\n      <p className=\"title\">Posts:</p>\n\n      <table className=\"table is-fullwidth is-striped is-hoverable is-narrow\">\n        <thead>\n          <tr className=\"has-background-link-light\">\n            <th>#</th>\n            <th>Title</th>\n            <th> </th>\n          </tr>\n        </thead>\n\n        <tbody>\n          {posts.map(post => {\n            const { id, title } = post;\n            const isPostActive = activePost?.id === id;\n\n            return (\n              <tr data-cy=\"Post\" key={id}>\n                <td data-cy=\"PostId\">{id}</td>\n                <td data-cy=\"PostTitle\">{title}</td>\n                <td className=\"has-text-right is-vcentered\">\n\n                  <button\n                    type=\"button\"\n                    data-cy=\"PostButton\"\n                    className={classNames(\n                      'button is-link',\n                      {\n                        'is-light': !isPostActive,\n                      },\n                    )}\n                    onClick={() => onOpeningPostDetails(post)}\n                  >\n                    {isPostActive ? 'Close' : 'Open'}\n                  </button>\n                </td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n","const BASE_URL = 'https://mate.academy/students-api';\n\nfunction wait(delay: number) {\n  return new Promise(resolve => {\n    setTimeout(resolve, delay);\n  });\n}\n\ntype RequestMethod = 'GET' | 'POST' | 'PATCH' | 'DELETE';\n\nfunction request<T>(\n  url: string,\n  method: RequestMethod = 'GET',\n  data: T | null = null,\n): Promise<T> {\n  const options: RequestInit = { method };\n\n  if (data) {\n    options.body = JSON.stringify(data);\n    options.headers = {\n      'Content-Type': 'application/json; charset=UTF-8',\n    };\n  }\n\n  return wait(300)\n    .then(() => fetch(BASE_URL + url, options))\n    .then(response => {\n      if (!response.ok) {\n        throw new Error();\n      }\n\n      return response.json();\n    });\n}\n\nexport const client = {\n  get: <T>(url: string) => request<T>(url),\n  post: <T>(url: string, data: T) => request<T>(url, 'POST', data),\n  patch: <T>(url: string, data: T) => request<T>(url, 'PATCH', data),\n  delete: (url: string) => request(url, 'DELETE'),\n};\n","import { client } from '../utils/fetchClient';\nimport { Comment } from '../types/Comment';\n\nexport const getComments = (id: number) => {\n  return client.get<Comment[]>(`/comments?postId=${id}`);\n};\n\nexport const addComment = (data: Comment) => {\n  return client.post<Comment>('/comments', data);\n};\n\nexport const removeComment = (id: number) => {\n  return client.delete(`/comments/${id}`);\n};\n","import { client } from '../utils/fetchClient';\nimport { Post } from '../types/Post';\n\nexport const getPosts = (id: number) => {\n  return client.get<Post[]>(`/posts?userId=${id}`);\n};\n","import React, { useState } from 'react';\nimport classNames from 'classnames';\n\nimport { FormErrors } from '../types/enums/Errors';\nimport { FormField } from '../types/FormField';\nimport { Post } from '../types/Post';\nimport { Comment } from '../types/Comment';\n\ntype Props = {\n  activePost: Post,\n  isFormLoading: boolean,\n  postComment: (comment: Comment) => Promise<void>,\n};\n\nexport const NewCommentForm: React.FC<Props> = ({\n  activePost,\n  isFormLoading,\n  postComment,\n}) => {\n  const initialFormField = {\n    content: '',\n    error: false,\n  };\n\n  const errorFormField = {\n    content: '',\n    error: true,\n  };\n\n  const [name, setName] = useState<FormField>(initialFormField);\n  const [email, setEmail] = useState<FormField>(initialFormField);\n  const [body, setBody] = useState<FormField>(initialFormField);\n\n  const handleInputContacts = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const inputName = event.target.name;\n    const inputValue = event.target.value;\n\n    const updatedData = {\n      content: inputValue,\n      error: false,\n    };\n\n    switch (inputName) {\n      case 'name':\n        setName(updatedData);\n\n        break;\n\n      case 'email':\n        setEmail(updatedData);\n        break;\n\n      default: break;\n    }\n  };\n\n  const handleInputTextArea = (\n    event: React.ChangeEvent<HTMLTextAreaElement>,\n  ) => {\n    setBody({\n      content: event.target.value,\n      error: false,\n    });\n  };\n\n  const resetFormFields = (event: React.FormEvent<Element>) => {\n    event.preventDefault();\n\n    setName(initialFormField);\n    setEmail(initialFormField);\n    setBody(initialFormField);\n  };\n\n  const handleFormSubmit = (event: React.FormEvent) => {\n    event.preventDefault();\n\n    if (!name.content) {\n      setName(errorFormField);\n    }\n\n    if (!email.content) {\n      setEmail(errorFormField);\n    }\n\n    if (!body.content) {\n      setBody(errorFormField);\n    }\n\n    if (!name.content || !email.content || !body.content) {\n      return;\n    }\n\n    const newComment = {\n      id: 0,\n      postId: activePost.id,\n      name: name.content,\n      email: email.content,\n      body: body.content,\n    };\n\n    postComment(newComment);\n    setBody(initialFormField);\n  };\n\n  const validateError = (value: FormField) => {\n    return classNames(\n      'input',\n      {\n        'is-danger': value.error,\n      },\n    );\n  };\n\n  const errorTriangle = (\n    <span\n      className=\"icon is-small is-right has-text-danger\"\n      data-cy=\"ErrorIcon\"\n    >\n      <i className=\"fas fa-exclamation-triangle\" />\n    </span>\n  );\n\n  const errorMessage = (message: string) => (\n    <p className=\"help is-danger\" data-cy=\"ErrorMessage\">\n      {message}\n    </p>\n  );\n\n  return (\n    <form data-cy=\"NewCommentForm\">\n      <div className=\"field\" data-cy=\"NameField\">\n        <label className=\"label\" htmlFor=\"comment-author-name\">\n          Author Name\n        </label>\n\n        <div className=\"control has-icons-left has-icons-right\">\n          <input\n            type=\"text\"\n            name=\"name\"\n            id=\"comment-author-name\"\n            placeholder=\"Name Surname\"\n            value={name.content}\n            className={validateError(name)}\n            onChange={handleInputContacts}\n          />\n\n          <span className=\"icon is-small is-left\">\n            <i className=\"fas fa-user\" />\n          </span>\n\n          {name.error && errorTriangle}\n        </div>\n\n        {name.error && errorMessage(FormErrors.Name)}\n      </div>\n\n      <div className=\"field\" data-cy=\"EmailField\">\n        <label className=\"label\" htmlFor=\"comment-author-email\">\n          Author Email\n        </label>\n\n        <div className=\"control has-icons-left has-icons-right\">\n          <input\n            type=\"text\"\n            name=\"email\"\n            id=\"comment-author-email\"\n            placeholder=\"email@test.com\"\n            value={email.content}\n            className={validateError(email)}\n            onChange={handleInputContacts}\n          />\n\n          <span className=\"icon is-small is-left\">\n            <i className=\"fas fa-envelope\" />\n          </span>\n\n          {email.error && errorTriangle}\n        </div>\n\n        {email.error && errorMessage(FormErrors.Email)}\n\n      </div>\n\n      <div className=\"field\" data-cy=\"BodyField\">\n        <label className=\"label\" htmlFor=\"comment-body\">\n          Comment Text\n        </label>\n\n        <div className=\"control\">\n          <textarea\n            id=\"comment-body\"\n            name=\"body\"\n            value={body.content}\n            placeholder=\"Type comment here\"\n            className={validateError(body)}\n            onChange={handleInputTextArea}\n          />\n        </div>\n\n        {body.error && errorMessage(FormErrors.TextArea)}\n      </div>\n\n      <div className=\"field is-grouped\">\n        <div className=\"control\">\n          <button\n            type=\"submit\"\n            className={classNames(\n              'button is-link',\n              {\n                'is-loading': isFormLoading,\n              },\n            )}\n            onClick={handleFormSubmit}\n          >\n            Add\n          </button>\n        </div>\n\n        <div className=\"control\">\n          {/* eslint-disable-next-line react/button-has-type */}\n          <button\n            type=\"reset\"\n            className=\"button is-link is-light\"\n            onClick={resetFormFields}\n          >\n            Clear\n          </button>\n        </div>\n      </div>\n    </form>\n  );\n};\n","import React, { useEffect, useState } from 'react';\nimport '@fortawesome/fontawesome-free/css/all.css';\nimport classNames from 'classnames';\nimport 'bulma/bulma.sass';\nimport './App.scss';\n\nimport { PostDetails } from './components/PostDetails';\nimport { UserSelector } from './components/UserSelector';\nimport { PostList } from './components/PostList';\nimport { Loader } from './components/Loader';\n\nimport { addComment, getComments, removeComment } from './api/comment';\nimport { getPosts } from './api/post';\nimport { getUsers } from './api/user';\n\nimport { ServerErrors } from './types/enums/Errors';\nimport { Comment } from './types/Comment';\nimport { User } from './types/User';\nimport { Post } from './types/Post';\nimport { NewCommentForm } from './components/NewCommentForm';\n\nexport const App: React.FC = () => {\n  const [activeUser, setActiveUser] = useState<User | null>(null);\n  const [activePost, setActivePost] = useState<Post | null>(null);\n  const [error, setError] = useState<ServerErrors | null>(null);\n  const [users, setUsers] = useState<User[]>([]);\n  const [posts, setPosts] = useState<Post[]>([]);\n  const [comments, setComments] = useState<Comment[]>([]);\n\n  const [isPostLoading, setIsPostLoading] = useState(false);\n  const [isFormRequested, setIsFormRequested] = useState(false);\n  const [areCommentsLoading, setAreCommentsLoading] = useState(false);\n  const [isFormLoading, setIsFormLoading] = useState(false);\n  const [isRetryLoading, setIsRetryLoading] = useState(false);\n\n  const initialComment = {\n    id: 0,\n    postId: 0,\n    name: '',\n    email: '',\n    body: '',\n  };\n\n  const [commentToAdd, setCommentToAdd] = useState<Comment>(initialComment);\n  const [commentIdOnDelete, setCommentIdOnDelete] = useState(0);\n\n  const userOrPostError = (\n    error === ServerErrors.Users || error === ServerErrors.Posts\n  );\n\n  const fetchUsers = async () => {\n    setError(null);\n\n    try {\n      const usersFromServer = await getUsers();\n\n      setUsers(usersFromServer);\n    } catch {\n      setError(ServerErrors.Users);\n    }\n  };\n\n  const fetchPosts = async (id: number) => {\n    setIsPostLoading(true);\n    setError(null);\n\n    try {\n      const postsFromServer: Post[] = await getPosts(id);\n\n      setPosts(postsFromServer);\n    } catch {\n      setError(ServerErrors.Posts);\n    } finally {\n      setIsPostLoading(false);\n    }\n  };\n\n  const fetchCommentsByPostId = async (id: number) => {\n    setAreCommentsLoading(true);\n    setError(null);\n\n    try {\n      const commentsFromServer: Comment[] = await getComments(id);\n\n      setComments(commentsFromServer);\n    } catch {\n      setError(ServerErrors.Comments);\n    } finally {\n      setAreCommentsLoading(false);\n    }\n  };\n\n  const postComment = async (comment: Comment) => {\n    setIsFormLoading(true);\n    setError(null);\n\n    try {\n      setCommentToAdd(comment);\n\n      const newComment = await addComment(comment);\n\n      setComments([...comments, newComment]);\n    } catch {\n      setError(ServerErrors.NewComment);\n    } finally {\n      setIsFormLoading(false);\n      setIsRetryLoading(false);\n    }\n  };\n\n  const deleteComment = async (id: number) => {\n    try {\n      setComments(comments.filter(comment => comment.id !== id));\n\n      await removeComment(id);\n    } catch {\n      setError(ServerErrors.CommentDeletion);\n      setComments(comments);\n    } finally {\n      setIsRetryLoading(false);\n    }\n  };\n\n  const handleSelectedUser = (user: User) => {\n    if (activeUser && user.id === activeUser.id) {\n      return;\n    }\n\n    fetchPosts(user.id);\n\n    setActiveUser(user);\n    setActivePost(null);\n  };\n\n  const handleSelectedPost = (post: Post) => {\n    if (post.id === activePost?.id) {\n      setActivePost(null);\n\n      return;\n    }\n\n    fetchCommentsByPostId(post.id);\n\n    setActivePost(post);\n    setIsFormRequested(false);\n  };\n\n  const handleCommentDeletion = (commentID: number) => {\n    deleteComment(commentID);\n\n    setCommentIdOnDelete(commentID);\n  };\n\n  const handleRetryAddOrDelete = () => {\n    setIsRetryLoading(true);\n    setError(null);\n\n    if (error === ServerErrors.NewComment) {\n      postComment(commentToAdd);\n    } else if (error === ServerErrors.CommentDeletion) {\n      deleteComment(commentIdOnDelete);\n    }\n  };\n\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n\n  return (\n    <main className=\"section\">\n      <div className=\"container\">\n        <div className=\"tile is-ancestor\">\n          <div className=\"tile is-parent\">\n            <div className=\"tile is-child box is-success\">\n              <div className=\"block\">\n                <UserSelector\n                  users={users}\n                  activeUser={activeUser}\n                  onOpeningPosts={handleSelectedUser}\n                />\n              </div>\n\n              <div className=\"block\" data-cy=\"MainContent\">\n                {!activeUser && (\n                  <p data-cy=\"NoSelectedUser\">\n                    No user selected\n                  </p>\n                )}\n\n                {isPostLoading && <Loader />}\n\n                {(error && userOrPostError) && (\n                  <div\n                    className=\"notification is-danger\"\n                    data-cy=\"PostsLoadingError\"\n                  >\n                    {error}\n                  </div>\n                )}\n\n                {(activeUser && !posts.length && !isPostLoading && !error) && (\n                  <div\n                    className=\"notification is-warning\"\n                    data-cy=\"NoPostsYet\"\n                  >\n                    No posts yet\n                  </div>\n                )}\n\n                {(posts.length > 0 && !isPostLoading) && (\n                  <PostList\n                    posts={posts}\n                    activePost={activePost}\n                    onOpeningPostDetails={handleSelectedPost}\n                  />\n                )}\n              </div>\n            </div>\n          </div>\n\n          <div\n            data-cy=\"Sidebar\"\n            className={classNames(\n              'tile',\n              'is-parent',\n              'is-8-desktop',\n              'Sidebar',\n              {\n                'Sidebar--open': activePost,\n              },\n            )}\n          >\n            <div className=\"tile is-child box is-success \">\n\n              {activePost && (\n                <div className=\"content\" data-cy=\"PostDetails\">\n                  <div className=\"content\" data-cy=\"PostDetails\">\n                    <PostDetails\n                      activePost={activePost}\n                      comments={comments}\n                      error={error}\n                      areCommentsLoading={areCommentsLoading}\n                      isFormRequested={isFormRequested}\n                      isRetryLoading={isRetryLoading}\n                      onFormRequest={setIsFormRequested}\n                      onDelete={handleCommentDeletion}\n                      onRetry={handleRetryAddOrDelete}\n                      setError={setError}\n                    />\n\n                    {isFormRequested && (\n                      <NewCommentForm\n                        activePost={activePost}\n                        isFormLoading={isFormLoading}\n                        postComment={postComment}\n                      />\n                    )}\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </main>\n  );\n};\n","import { client } from '../utils/fetchClient';\nimport { User } from '../types/User';\n\nexport const getUsers = () => {\n  return client.get<User[]>('/users');\n};\n","import ReactDOM from 'react-dom';\n\nimport { App } from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}